
# Auto generated by Chef
# All changes would be lost

<% def get_nginx_directive(key, value, prefix = "")
	content = prefix + "#{key} "
	if value.kind_of?(Hash)
		content += get_nginx_directive_hash(value, prefix )
	elsif value.kind_of?(Array)
		useSemiColon = true
		value.each do |subValue|
			if subValue.kind_of?(Hash)
				content += get_nginx_directive_hash(subValue, prefix)
				useSemiColon = false
			elsif subValue.kind_of?(Array)
				content += subValue.join(" ")
				useSemiColon = true
			else
				content += "#{subValue} "
				useSemiColon = true
			end
		end
		if useSemiColon
			content += ";"
		end 
		content += "\n"
	else
		content += "#{value};\n"
	end
	return content
end 

def get_nginx_directive_hash(hash_directive, prefix = "")
	content = "{\n"
	hash_directive.each do | key, value |
		content += prefix + get_nginx_directive(key,value, prefix + "\t")
	end
	content += prefix + "}\n"
	return content
end
%>


<% @nginx_conf.each do | key, value | 
	%><%= get_nginx_directive(key,value) %><% 
end %>
